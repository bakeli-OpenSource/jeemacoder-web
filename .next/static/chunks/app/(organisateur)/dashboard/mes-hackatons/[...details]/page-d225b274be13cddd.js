(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[739],{3380:function(e,t,s){Promise.resolve().then(s.bind(s,4003))},4003:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var a=s(7437),r=s(2265),i=s(4867),n=s(6648),o=s(4839);function l(e){let{id:t,type:s="text",value:r,placeholder:n,className:l,label:d,required:c,onChange:u,readOnly:h}=e;return(0,a.jsxs)("div",{className:"w-full text-gray-700",children:[d&&(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-900 mb-1",children:[d,c&&(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{id:t,type:s,value:r,onChange:u,placeholder:n,readOnly:h,className:(0,o.Z)("w-full placeholder-gray-400 focus:border-indigo-500 outline-none px-4 py-2 rounded-md border bg-gray-50 text-sm transition duration-300 ease-in-out hover:bg-white focus:bg-white",l)}),"password"===s&&(0,a.jsx)(i.hsE,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 cursor-pointer"})]})]})}let d=e=>{let{className:t,variant:s="default",...r}=e;return(0,a.jsx)("button",{className:(0,o.Z)({"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-orange-400 transition duration-300 ease-in-out":"default"===s,"px-4 py-2 bg-indigo-600 text-white rounded-full hover:bg-indigo-700 transition duration-300 ease-in-out":"rounded"===s},t),...r,children:r.children})};var c=s(932),u=s(5524),h=s(57),p=s(6463),m=s(7798);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,s(8030).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var g=s(8517),b=s(2888);let v=null;v=localStorage.getItem("authToken");let f=e=>{let{hackathonId:t}=e,[s,i]=(0,r.useState)({tagName:"",hackathonId:t}),n=(0,u.D)({mutationFn:async e=>await fetch("https://api.jeemacoder.fewnu.app/api/tag/add",{method:"POST",headers:{authorization:"Bearer ".concat(v)},body:e}).then(e=>console.log(e,"les tags cr\xe9e")).catch(e=>console.log(e,"")),onSuccess:()=>{i({tagName:"",hackathonId:t})}}),{data:o,isLoading:l,isError:d}=(0,c.a)({queryFn:async()=>await (0,h.NJ)(t),queryKey:["tags",t]});return(0,a.jsxs)("div",{className:"flex gap-5 max-w-2xl py-8",children:[(0,a.jsx)("div",{className:"max-w-xl",children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=new FormData;t.append("name",s.tagName),t.append("hackathon_id",s.hackathonId),n.mutate(t)},children:[(0,a.jsx)("label",{htmlFor:"tagName",className:"text-sm py-1 font-medium ",children:"Aider les personne a comprendre votre hackathon"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"text",placeholder:"Ajoutez un tags",value:s.tagName,className:"w-44 outline-none border placeholder:text-xs text-xs px-4 rounded-md py-2",id:"tagName",onChange:e=>{let t=e.currentTarget;i({...s,[t.id]:t.value})}}),(0,a.jsx)("button",{type:"submit",className:"w-20 flex items-center justify-center px-2 gap-4 py-1 text-xs rounded-lg border",children:(0,a.jsx)(x,{className:"stroke-1 text-dark font-semibold"})})]})]})}),(0,a.jsxs)("div",{className:"border p-1 rounded-md",children:[(0,a.jsx)("span",{className:"text-xs ",children:"vos tags : "}),l&&(0,a.jsx)("p",{children:"Chargement..."}),!l&&!d&&o&&(0,a.jsx)(g.H,{items:o,resourcename:"tag",component:b.s,className:"flex"}),d&&(0,a.jsx)("p",{children:"Erreur lors du chargement des tags."})]})]})},y=e=>{let{hackathonId:t}=e,s=(0,p.useRouter)(),{data:o,isLoading:x,isError:g}=(0,c.a)({queryFn:async()=>await (0,h.cP)(t),queryKey:["hackathon",t]}),[b,v]=(0,r.useState)(null),[y,N]=(0,r.useState)(null);(0,r.useEffect)(()=>{o&&N(o)},[o]);let j=e=>{v(e===b?null:e)},w=(0,u.D)({mutationFn:async()=>{y&&await (0,h.Ed)(t,y)},onSuccess:()=>{s.refresh()}});return x?(0,a.jsx)("div",{children:"Loading..."}):g?(0,a.jsx)("div",{children:"Error loading hackathon details"}):y?(0,a.jsxs)("div",{className:"p-8 bg-white shadow-lg rounded-lg",children:[(0,a.jsxs)("form",{className:"w-full space-y-6",onSubmit:e=>{e.preventDefault(),w.mutate()},children:[(0,a.jsxs)("div",{className:"flex items-center gap-5",children:[(0,a.jsx)("div",{className:"w-24 h-24 relative rounded-lg overflow-hidden",children:(0,a.jsx)(n.default,{src:"".concat(y.logo_url),loader:m.Z,layout:"fill",objectFit:"cover",alt:"Hackathon Image"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,a.jsx)(l,{id:"name",value:y.name,placeholder:"",className:"w-full",onChange:e=>N({...y,name:e.target.value}),readOnly:"name"!==b}),(0,a.jsx)("div",{className:"p-2",children:(0,a.jsx)(i.JtS,{className:"hover:bg-gray-200 rounded-full cursor-pointer transition duration-300 ease-in-out",onClick:()=>j("name")})})]})]}),(0,a.jsxs)("div",{className:"mt-5 flex gap-3",children:[(0,a.jsx)("textarea",{placeholder:"Description",title:"",rows:5,className:"w-full outline-none p-4 rounded-lg border bg-gray-50 transition duration-300 ease-in-out hover:bg-white focus:bg-white",readOnly:"description"!==b,value:y.description||"Description not available",onChange:e=>N({...y,description:e.target.value})}),(0,a.jsx)("div",{className:"p-2",children:(0,a.jsx)(i.JtS,{className:"hover:bg-gray-200 rounded-full cursor-pointer transition duration-300 ease-in-out",onClick:()=>j("description")})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,a.jsx)(l,{id:"organisateur",value:y.structure_organisateur,placeholder:"",onChange:e=>N({...y,structure_organisateur:e.target.value}),label:"Organisateur",readOnly:"organisateur"!==b,className:"w-full"}),(0,a.jsx)("div",{className:"p-2",children:(0,a.jsx)(i.JtS,{className:"hover:bg-gray-200 rounded-full cursor-pointer transition duration-300 ease-in-out",onClick:()=>j("organisateur")})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,a.jsx)(l,{id:"lieu",value:y.lieu,placeholder:"",onChange:e=>N({...y,lieu:e.target.value}),label:"Lieu",readOnly:"lieu"!==b,className:"w-full"}),(0,a.jsx)("div",{className:"p-2",children:(0,a.jsx)(i.JtS,{className:"hover:bg-gray-200 rounded-full cursor-pointer transition duration-300 ease-in-out",onClick:()=>j("lieu")})})]})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,a.jsx)(l,{id:"date_debut",value:y.date_debut,placeholder:"",type:"date",onChange:e=>N({...y,date_debut:e.target.value}),label:"Date de d\xe9but",readOnly:"date_debut"!==b,className:"w-full"}),(0,a.jsx)("div",{className:"p-2",children:(0,a.jsx)(i.JtS,{className:"hover:bg-gray-200 rounded-full cursor-pointer transition duration-300 ease-in-out",onClick:()=>j("date_debut")})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,a.jsx)(l,{id:"date_fin",value:y.date_fin,placeholder:"",type:"date",onChange:e=>N({...y,date_fin:e.target.value}),label:"Date de fin",readOnly:"date_fin"!==b,className:"w-full"}),(0,a.jsx)("div",{className:"p-2",children:(0,a.jsx)(i.JtS,{className:"hover:bg-gray-200 rounded-full cursor-pointer transition duration-300 ease-in-out",onClick:()=>j("date_fin")})})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,a.jsx)(l,{id:"prix",value:y.prix,placeholder:"",onChange:e=>N({...y,prix:e.target.value}),label:"Prix",readOnly:"prix"!==b,className:"w-full"}),(0,a.jsx)("div",{className:"p-2",children:(0,a.jsx)(i.JtS,{className:"hover:bg-gray-200 rounded-full cursor-pointer transition duration-300 ease-in-out",onClick:()=>j("prix")})})]}),(0,a.jsxs)("div",{className:"flex flex-col w-full",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-900 mb-1",children:"Th\xe8me"}),(0,a.jsxs)("select",{title:"Theme",name:"Theme",className:"outline-none border p-3 rounded-md bg-gray-50 transition duration-300 ease-in-out hover:bg-white focus:bg-white w-full",value:y.theme||"orange",onChange:e=>N({...y,theme:e.target.value}),disabled:"theme"!==b,children:[(0,a.jsx)("option",{value:"orange",children:"Orange"}),(0,a.jsx)("option",{value:"vert",children:"Vert"}),(0,a.jsx)("option",{value:"bleu",children:"Bleu"})]})]})]}),(0,a.jsx)(d,{type:"submit",className:"mt-4 bg-orange-400",disabled:x,children:x?"Enregistrement...":"Modifier"})]}),(0,a.jsx)(f,{hackathonId:t}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-xs",children:" Mise en place des Regles "}),(0,a.jsx)("div",{children:(0,a.jsx)("ul",{className:"list-disc text-xs",children:(0,a.jsx)("li",{children:" Les delais de livraons sont impardonable "})})})]})]}):null},N=e=>{let{hackathonId:t}=e,[s,o]=(0,r.useState)([]),[l,d]=(0,r.useState)(1);(0,r.useEffect)(()=>{(async()=>{try{let e=await (0,h.aS)(t);if(console.log("Data received from API:",e),e.success){let t=[...e.Individuels.map(e=>({id:e.id,type:"Solo",user:e.user?{id:e.user.id||"",firstname:e.user.firstname||"N/A",lastname:e.user.lastname||"N/A",pays:e.user.pays||"N/A",ville:e.user.ville||"N/A",email:e.user.email||"N/A",metier:e.user.metier||"N/A",role:e.user.role||"N/A",photo:e.user.photo||"/default-avatar.png",created_at:e.user.created_at||"",updated_at:e.user.updated_at||""}:null,motivation:e.motivation||"Aucune",status:e.status,created_at:e.created_at,updated_at:e.updated_at})),...e.Equipes.map(e=>({id:e.id,type:"\xc9quipe",user:e.user?{id:e.user.id||"",firstname:e.user.firstname||"N/A",lastname:e.user.lastname||"N/A",pays:e.user.pays||"N/A",ville:e.user.ville||"N/A",email:e.user.email||"N/A",metier:e.user.metier||"N/A",role:e.user.role||"N/A",photo:e.user.photo||"/default-avatar.png",created_at:e.user.created_at||"",updated_at:e.user.updated_at||""}:null,motivation:e.motivation||"Aucune",status:e.status,created_at:e.created_at,updated_at:e.updated_at}))];o(t)}else console.error("Unexpected response format:",e)}catch(e){console.error("Error fetching participants:",e)}})()},[t]);let c=async(e,t,s,a)=>{try{"accept\xe9"===t?"Solo"===a?(await (0,h.lX)(e),console.log("Name : ",s),console.log("typeEspace : ",a),console.log("Participant ID : ",e),await (0,h.MB)(s,"individuel",e)):"\xc9quipe"===a&&(await (0,h.fs)(e),console.log("Participant ID : ",e),await (0,h.MB)("cgfg","equipe",e)):"Solo"===a?await (0,h.gP)(e):"\xc9quipe"===a&&await (0,h.Lv)(e),o(s=>s.map(s=>s.id===e?{...s,status:t}:s))}catch(e){console.error("Error updating participant status:",e)}},u=s.filter(e=>"attente"===e.status),p=Math.ceil(u.length/8),m=u.slice((l-1)*8,8*l);return(0,a.jsxs)("div",{className:"p-8 bg-white shadow-lg rounded-lg",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Enr\xf4lement"}),(0,a.jsxs)("div",{className:"overflow-x-auto",children:[(0,a.jsxs)("table",{className:"min-w-full bg-white",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"py-2 px-4 border-b-2 border-gray-300 text-left",children:"Type"}),(0,a.jsx)("th",{className:"py-2 px-4 border-b-2 border-gray-300 text-left",children:"Photo"}),(0,a.jsx)("th",{className:"py-2 px-4 border-b-2 border-gray-300 text-left",children:"Nom"}),(0,a.jsx)("th",{className:"py-2 px-4 border-b-2 border-gray-300 text-left",children:"Pr\xe9nom"}),(0,a.jsx)("th",{className:"py-2 px-4 border-b-2 border-gray-300 text-left",children:"Motivation"}),(0,a.jsx)("th",{className:"py-2 px-4 border-b-2 border-gray-300 text-left",children:"Validation"})]})}),(0,a.jsx)("tbody",{children:m.map(e=>{var t,s,r,o,l;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:e.type}),(0,a.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:(0,a.jsx)(n.default,{src:(null===(t=e.user)||void 0===t?void 0:t.photo)||"/default-avatar.png",alt:"".concat((null===(s=e.user)||void 0===s?void 0:s.firstname)||"N/A"," ").concat((null===(r=e.user)||void 0===r?void 0:r.lastname)||"N/A"),className:"w-12 h-12 rounded-full",width:100,height:100})}),(0,a.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:(null===(o=e.user)||void 0===o?void 0:o.firstname)||"N/A"}),(0,a.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:(null===(l=e.user)||void 0===l?void 0:l.lastname)||"N/A"}),(0,a.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:e.motivation||"Aucune"}),(0,a.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{title:"Reject",className:"text-red-500 hover:bg-red-100 rounded p-1",onClick:()=>{var t;return c(e.id,"refus\xe9",(null===(t=e.user)||void 0===t?void 0:t.firstname)||"",e.type)},children:(0,a.jsx)(i.ypG,{})}),(0,a.jsx)("button",{title:"Validate",className:"text-green-500 hover:bg-green-100 rounded p-1",onClick:()=>{var t;return c(e.id,"accept\xe9",(null===(t=e.user)||void 0===t?void 0:t.firstname)||"",e.type)},children:(0,a.jsx)(i.nQG,{})})]})})]},e.id)})})]}),(0,a.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,a.jsx)("button",{className:"px-4 py-2 rounded ".concat(1===l?"bg-gray-300 text-gray-500":"bg-orange-400 text-white"),onClick:()=>d(e=>Math.max(e-1,1)),disabled:1===l,children:"Previous"}),(0,a.jsxs)("span",{className:"px-4 py-2",children:["Page ",l," of ",p]}),(0,a.jsx)("button",{className:"px-4 py-2 rounded ".concat(l===p?"bg-gray-300 text-gray-500":"bg-orange-400 text-white"),onClick:()=>d(e=>Math.min(e+1,p)),disabled:l===p,children:"Next"})]})]})]})},j=e=>{let{hackathonId:t}=e,[s,o]=(0,r.useState)([]),[l,d]=(0,r.useState)(1);(0,r.useEffect)(()=>{(async()=>{try{let e=await (0,h.aS)(t);if(console.log("Data received from API:",e),e.success){let t=[...e.Individuels.map(e=>({id:e.id,type:"Solo",user:e.user||null,motivation:e.motivation||"",status:e.status,created_at:e.created_at,updated_at:e.updated_at})),...e.Equipes.map(e=>({id:e.id,type:"\xc9quipe",user:e.user||null,motivation:e.motivation||"",status:e.status,created_at:e.created_at,updated_at:e.updated_at}))];o(t.filter(e=>"accept\xe9"===e.status))}else console.error("Unexpected response format:",e)}catch(e){console.error("Error fetching participants:",e)}})()},[t]);let c=Math.ceil(s.length/8),u=s.slice((l-1)*8,8*l),p=e=>{console.log("Showing details for participant ".concat(e))},m=e=>{console.log("Banning participant ".concat(e))};return(0,a.jsxs)("div",{className:"p-8 bg-white shadow-lg rounded-lg",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Gestion des Participants"}),(0,a.jsxs)("div",{className:"overflow-x-auto",children:[(0,a.jsxs)("table",{className:"min-w-full bg-white",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"py-2 px-4 border-b-2 border-gray-300 text-left",children:"Type"}),(0,a.jsx)("th",{className:"py-2 px-4 border-b-2 border-gray-300 text-left",children:"Photo"}),(0,a.jsx)("th",{className:"py-2 px-4 border-b-2 border-gray-300 text-left",children:"Nom"}),(0,a.jsx)("th",{className:"py-2 px-4 border-b-2 border-gray-300 text-left",children:"Pr\xe9nom"}),(0,a.jsx)("th",{className:"py-2 px-4 border-b-2 border-gray-300 text-left",children:"Motivation"}),(0,a.jsx)("th",{className:"py-2 px-4 border-b-2 border-gray-300 text-left",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:u.map(e=>{var t,s,r,o,l;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:e.type}),(0,a.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:(0,a.jsx)(n.default,{src:(null===(t=e.user)||void 0===t?void 0:t.photo)||"/default-avatar.png",alt:"".concat((null===(s=e.user)||void 0===s?void 0:s.firstname)||"N/A"," ").concat((null===(r=e.user)||void 0===r?void 0:r.lastname)||"N/A"),className:"w-12 h-12 rounded-full",width:100,height:100})}),(0,a.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:(null===(o=e.user)||void 0===o?void 0:o.firstname)||"N/A"}),(0,a.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:(null===(l=e.user)||void 0===l?void 0:l.lastname)||"N/A"}),(0,a.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:e.motivation||"N/A"}),(0,a.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{title:"Details",className:"text-blue-500 hover:bg-blue-100 rounded p-1",onClick:()=>p(e.id),children:(0,a.jsx)(i.hsE,{})}),(0,a.jsx)("button",{title:"Ban",className:"text-red-500 hover:bg-red-100 rounded p-1",onClick:()=>m(e.id),children:(0,a.jsx)(i.XZC,{})})]})})]},e.id)})})]}),(0,a.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,a.jsx)("button",{className:"px-4 py-2 rounded ".concat(1===l?"bg-gray-300 text-gray-500":"bg-orange-400 text-white"),onClick:()=>d(e=>Math.max(e-1,1)),disabled:1===l,children:"Previous"}),(0,a.jsxs)("span",{className:"px-4 py-2",children:["Page ",l," of ",c]}),(0,a.jsx)("button",{className:"px-4 py-2 rounded ".concat(l===c?"bg-gray-300 text-gray-500":"bg-orange-400 text-white"),onClick:()=>d(e=>Math.min(e+1,c)),disabled:l===c,children:"Next"})]})]})]})};function w(e){let{params:t}=e,[s,i]=t.details;console.log("id : ",i);let[n,o]=(0,r.useState)("details");return(0,a.jsxs)("div",{className:"h-full overflow-auto border",children:[(0,a.jsxs)("div",{className:"w-full h-5 px-5 py-8",children:[(0,a.jsx)("h1",{className:"text-sm",children:"Details"}),(0,a.jsx)("p",{className:"text-xs text-[#636364]",children:"Ici vous avez une vue g\xe9n\xe9rale de vos Hackathons"})]}),(0,a.jsxs)("div",{className:"flex space-x-4 px-5 py-4 border-b",children:[(0,a.jsx)("button",{className:"py-2 px-4 rounded ".concat("details"===n?"bg-orange-400 text-white":"bg-gray-200 text-gray-700"),onClick:()=>o("details"),children:"Detail Hackathon"}),(0,a.jsx)("button",{className:"py-2 px-4 rounded ".concat("enrolment"===n?"bg-orange-400 text-white":"bg-gray-200 text-gray-700"),onClick:()=>o("enrolment"),children:"Enrolement"}),(0,a.jsx)("button",{className:"py-2 px-4 rounded ".concat("participant"===n?"bg-orange-400 text-white":"bg-gray-200 text-gray-700"),onClick:()=>o("participant"),children:"Participant"})]}),(0,a.jsxs)("div",{className:"p-5",children:["details"===n&&(0,a.jsx)(y,{hackathonId:i}),"enrolment"===n&&(0,a.jsx)(N,{hackathonId:i}),"participant"===n&&(0,a.jsx)(j,{hackathonId:i})," "]})]})}},2812:function(e,t,s){"use strict";s.d(t,{R:function(){return o},m:function(){return n}});var a=s(9948),r=s(3494),i=s(924),n=class extends r.F{#e;#t;#s;constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#e=[],this.state=e.state||o(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(t=>t!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||("pending"===this.state.status?this.scheduleGc():this.#t.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){this.#s=(0,i.Mz)({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(Error("No mutationFn found")),onFail:(e,t)=>{this.#a({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});let t="pending"===this.state.status,s=!this.#s.canStart();try{if(!t){this.#a({type:"pending",variables:e,isPaused:s}),await this.#t.config.onMutate?.(e,this);let t=await this.options.onMutate?.(e);t!==this.state.context&&this.#a({type:"pending",context:t,variables:e,isPaused:s})}let a=await this.#s.start();return await this.#t.config.onSuccess?.(a,e,this.state.context,this),await this.options.onSuccess?.(a,e,this.state.context),await this.#t.config.onSettled?.(a,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(a,null,e,this.state.context),this.#a({type:"success",data:a}),a}catch(t){try{throw await this.#t.config.onError?.(t,e,this.state.context,this),await this.options.onError?.(t,e,this.state.context),await this.#t.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,t,e,this.state.context),t}finally{this.#a({type:"error",error:t})}}finally{this.#t.runNext(this)}}#a(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),a.V.batch(()=>{this.#e.forEach(t=>{t.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function o(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}},5524:function(e,t,s){"use strict";s.d(t,{D:function(){return u}});var a=s(2265),r=s(2812),i=s(9948),n=s(9010),o=s(6298),l=class extends n.l{#r;#i=void 0;#n;#o;constructor(e,t){super(),this.#r=e,this.setOptions(t),this.bindMethods(),this.#l()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#r.defaultMutationOptions(e),(0,o.VS)(this.options,t)||this.#r.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,o.Ym)(t.mutationKey)!==(0,o.Ym)(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#l(),this.#d(e)}getCurrentResult(){return this.#i}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#l(),this.#d()}mutate(e,t){return this.#o=t,this.#n?.removeObserver(this),this.#n=this.#r.getMutationCache().build(this.#r,this.options),this.#n.addObserver(this),this.#n.execute(e)}#l(){let e=this.#n?.state??(0,r.R)();this.#i={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#d(e){i.V.batch(()=>{if(this.#o&&this.hasListeners()){let t=this.#i.variables,s=this.#i.context;e?.type==="success"?(this.#o.onSuccess?.(e.data,t,s),this.#o.onSettled?.(e.data,null,t,s)):e?.type==="error"&&(this.#o.onError?.(e.error,t,s),this.#o.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach(e=>{e(this.#i)})})}},d=s(3191),c=s(7832);function u(e,t){let s=(0,d.NL)(t),[r]=a.useState(()=>new l(s,e));a.useEffect(()=>{r.setOptions(e)},[r,e]);let n=a.useSyncExternalStore(a.useCallback(e=>r.subscribe(i.V.batchCalls(e)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),o=a.useCallback((e,t)=>{r.mutate(e,t).catch(c.Z)},[r]);if(n.error&&(0,c.L)(r.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:o,mutateAsync:n.mutate}}}},function(e){e.O(0,[310,138,648,336,932,404,971,23,744],function(){return e(e.s=3380)}),_N_E=e.O()}]);
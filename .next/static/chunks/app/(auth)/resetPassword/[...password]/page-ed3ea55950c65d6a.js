(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[526],{9114:function(e,s,a){Promise.resolve().then(a.bind(a,8633))},8633:function(e,s,a){"use strict";a.r(s);var r=a(7437),t=a(6463),n=a(2265),l=a(5942),o=a(9555),d=a(8472),i=a(7690),c=a(7138);s.default=()=>{let e=(0,t.useRouter)(),[s,a]=(0,n.useState)({password:"",confirmPassword:""}),[u,m]=(0,n.useState)({}),[p,x]=(0,n.useState)(null),[f,h]=(0,n.useState)(null),[w,g]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=new URLSearchParams(window.location.search);h(e.get("token")),g(e.get("email"))},[]);let j=e=>{let r=e.currentTarget;a({...s,[r.id]:r.value})},N=async r=>{if(r.preventDefault(),m({}),x(null),s.password!==s.confirmPassword){m({confirmPassword:"Les mots de passe ne correspondent pas"});return}if(!f||!w){m({general:"Param\xe8tres manquants dans l'URL"});return}let t={password:s.password,password_confirmation:s.confirmPassword,token:f,email:w};console.log("Formdata : ",t);try{let s=await d.Z.post("https://api.jeemacoder.fewnu.app/api/password/reset",t,{headers:{"Content-Type":"application/json"}});console.log("res : ",s.data),"R\xe9initialisation du mot de passe r\xe9ussie"===s.data.message?(x("Votre mot de passe a \xe9t\xe9 r\xe9initialis\xe9 avec succ\xe8s."),a({password:"",confirmPassword:""}),setTimeout(()=>{e.replace("/login")},2e3)):m({general:"Une erreur s'est produite lors de la r\xe9initialisation du mot de passe."})}catch(e){m({general:"Une erreur s'est produite lors de la r\xe9initialisation du mot de passe."}),console.log("error",e)}};return(0,r.jsxs)("div",{className:"h-screen p-10",children:[(0,r.jsxs)(c.default,{href:"/user_role",className:"border flex items-center gap-2 max-w-32 py-1 rounded-md justify-center",children:[(0,r.jsx)(i.Z,{className:"stroke-1 size-3"})," ",(0,r.jsx)("span",{children:"Retour"})]}),(0,r.jsx)("div",{className:"flex justify-center items-center max-w-4xl m-auto",children:(0,r.jsx)("div",{className:"m-auto flex flex-col gap-20 justify-center items-center py-10 px-20 rounded-md",children:(0,r.jsxs)("form",{className:"w-[420px]",onSubmit:N,children:[(0,r.jsx)("h1",{className:"my-5 text-lg",children:"D\xe9finissez un nouveau mot de passe"}),u.general&&(0,r.jsxs)("div",{className:"text-red-500",children:[" ",u.general," "]}),p&&(0,r.jsxs)("div",{className:"text-green-500",children:[" ",p," "]}),(0,r.jsxs)("div",{className:"flex flex-col gap-7",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,r.jsx)(o.Z,{id:"password",type:"password",placeholder:"*********",value:s.password,onChange:j,className:"",label:"Nouveau mot de passe"}),u.password&&(0,r.jsxs)("div",{className:"text-red-500",children:[" ",u.password," "]}),(0,r.jsx)(o.Z,{id:"confirmPassword",type:"password",placeholder:"*********",value:s.confirmPassword,onChange:j,className:"",label:"Confirmez le mot de passe"}),u.confirmPassword&&(0,r.jsxs)("div",{className:"text-red-500",children:[" ",u.confirmPassword," "]})]}),(0,r.jsx)(l.z,{children:"R\xe9initialiser le mot de passe"}),(0,r.jsx)("div",{className:"flex flex-col",children:(0,r.jsx)(c.default,{className:"text-red-500",href:"/login",children:(0,r.jsx)("span",{className:"font-semibold underline",children:"Se connecter"})})})]})]})})})]})}},5942:function(e,s,a){"use strict";a.d(s,{z:function(){return n}});var r=a(7437),t=a(4839);a(2265);let n=e=>{let{className:s,variant:a="default",...n}=e;return(0,r.jsx)("button",{className:(0,t.Z)({"m-auto rounded-md py-2 w-full bg-dark text-white text-sm hover:bg-dark-green-hover":"default"===a,"":"rounded"===a},s),...n,children:n.children})}},9555:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var r=a(7437),t=a(4839);function n(e){let{id:s,type:a="text",value:n,placeholder:l,className:o,label:d,required:i,onChange:c,readOnly:u}=e;return(0,r.jsxs)("div",{className:"max-w-xl text-dark-green ",children:[(0,r.jsxs)("label",{className:"text-xs px-2 font-light",children:[d,i&&(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("div",{className:"",children:(0,r.jsx)("input",{id:s,type:a,value:n,onChange:c,placeholder:l,"data-date-format":"YYYY-MM-DD",readOnly:u,className:(0,t.Z)("w-full placeholder:text-[#636364] focus:border-light-green outline-none px-3 py-3 rounded-md bg-muted text-xs border max-sm:px-2 max-sm:py-2 max-sm:placeholder:text-xs",o)})})]})}a(2265)},6463:function(e,s,a){"use strict";var r=a(1169);a.o(r,"usePathname")&&a.d(s,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(s,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(s,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[138,136,971,23,744],function(){return e(e.s=9114)}),_N_E=e.O()}]);